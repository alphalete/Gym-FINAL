/*! For license information please see main.1b613f19.js.LICENSE.txt */
(()=>{"use strict";var e={122:(e,t,n)=>{n.d(t,{Ay:()=>h,getSyncStatus:()=>p});var r=n(555),a=n(405);const l=a.default||a||{},o=async()=>{try{var e,t;return null!==(e=await(null===(t=l.getSetting)||void 0===t?void 0:t.call(l,"pendingSync",[])))&&void 0!==e?e:[]}catch(n){return console.warn("Failed to get pending sync:",n),[]}},i=async e=>{try{var t,n,a,i;const s=await o(),c=(0,r.A)({id:(null===(t=crypto)||void 0===t||null===(n=t.randomUUID)||void 0===n?void 0:n.call(t))||String(Date.now()),timestamp:Date.now()},e);s.push(c),await(null===(a=l.saveSetting)||void 0===a?void 0:a.call(l,"pendingSync",s)),console.log("\ud83d\udce4 Added to sync queue:",c.type,(null===(i=c.data)||void 0===i?void 0:i.id)||c.memberId)}catch(s){console.warn("Failed to add pending sync:",s)}},s=async e=>{try{var t;const n=(await o()).filter((t=>t.id!==e));await(null===(t=l.saveSetting)||void 0===t?void 0:t.call(l,"pendingSync",n))}catch(n){console.warn("Failed to remove pending sync:",n)}},c=async e=>{try{const e="https://fitness-tracker-app.preview.emergentagent.com";if(t){if(!(await fetch("".concat(t,"/api/clients/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Backend update failed");window.dispatchEvent(new CustomEvent("DATA_CHANGED",{detail:"member_updated"}))}}h(!1)}catch(a){throw console.error("Error updating member:",a),a}},onCancel:()=>h(!1)})]})};return(0,xt.jsxs)("div",{className:"p-4",children:[(0,xt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,xt.jsx)("h1",{className:"text-xl font-semibold",children:"Members"}),u.length>0&&(0,xt.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>c(!0),children:"+ Add Member"})]}),s&&(0,xt.jsxs)("div",{className:"card mb-6",children:[(0,xt.jsx)("div",{className:"card-header",children:(0,xt.jsx)("h3",{className:"text-lg font-semibold",children:"Add New Member"})}),(0,xt.jsx)("div",{className:"card-body",children:(0,xt.jsx)(ba,{onAddOrUpdateMember:d,onCancel:()=>{c(!1);const e=localStorage.getItem("addMemberOrigin");var t,n;e&&(localStorage.removeItem("addMemberOrigin"),null===(t=(n=window).navigateToTab)||void 0===t||t.call(n,e))},onSuccess:()=>{c(!1);const e=localStorage.getItem("addMemberOrigin");var t,n;e?(localStorage.removeItem("addMemberOrigin"),null===(t=(n=window).navigateToTab)||void 0===t||t.call(n,e)):window.location.reload()}})})]}),0===u.length?(0,xt.jsxs)("div",{className:"text-center py-8",children:[(0,xt.jsx)("div",{className:"text-slate-500 mb-4",children:"No members yet."}),(0,xt.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>c(!0),children:"Add your first member"})]}):u.map(((e,t)=>(0,xt.jsx)(f,{m:e,onDeleteMember:m,onAddOrUpdateMember:d},e.id||e._id||e.uuid||t)))]})},MembershipManagement:function(){const{members:e,loading:t,error:n}=Nt(),[a,l]=r.useState([]),[i,s]=r.useState(!0),[c,u]=r.useState(!1),[d,m]=r.useState(null),[f,p]=r.useState({name:"",price:"",description:"",duration:"monthly",features:[]});r.useEffect((()=>{let e=!0;return(async()=>{try{const t=St||St.default;if(t.getPlans){const n=await t.getPlans();e&&l(Array.isArray(n)?n:[])}else if(t.getAll){const n=await t.getAll("plans");e&&l(Array.isArray(n)?n:[])}}catch(t){console.error("Error loading plans:",t)}finally{e&&s(!1)}})(),()=>{e=!1}}),[]);const h=()=>{p({name:"",price:"",description:"",duration:"monthly",features:[]}),m(null),u(!1)};if(t||i)return(0,xt.jsx)("div",{className:"p-4",children:"Loading plans\u2026"});if(n)return(0,xt.jsx)("div",{className:"p-4 text-rose-600",children:"Error loading plans"});const g=Array.isArray(e)?e:[],v=Array.isArray(a)?a:[];return(0,xt.jsxs)("div",{className:"p-4",children:[(0,xt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,xt.jsx)("h1",{className:"text-xl font-semibold",children:"Membership Plans"}),(0,xt.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>u(!0),children:[(0,xt.jsx)(va,{name:"\u2795",className:"mr-2"}),"Add Plan"]})]}),c&&(0,xt.jsxs)("div",{className:"card mb-6",children:[(0,xt.jsx)("div",{className:"card-header",children:(0,xt.jsx)("h3",{className:"text-lg font-semibold",children:d?"Edit Plan":"Create New Plan"})}),(0,xt.jsx)("div",{className:"card-body",children:(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f.name.trim()&&f.price)try{var t,n;const e=(0,o.A)((0,o.A)({},f),{},{price:parseFloat(f.price),id:(null===d||void 0===d?void 0:d.id)||(null===(t=crypto)||void 0===t||null===(n=t.randomUUID)||void 0===n?void 0:n.call(t))||String(Date.now()),createdAt:(null===d||void 0===d?void 0:d.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}),r=St||St.default;r.savePlan?await r.savePlan(e):r.saveData&&await r.saveData("plans",e);let a=[];r.getPlans?a=await r.getPlans():r.getAll&&(a=await r.getAll("plans")),l(Array.isArray(a)?a:[]),h()}catch(r){console.error("Error saving plan:",r),alert("Error saving plan. Please try again.")}},className:"space-y-4",children:[(0,xt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan Name *"}),(0,xt.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Premium, Basic, VIP",value:f.name,onChange:e=>p((t=>(0,o.A)((0,o.A)({},t),{},{name:e.target.value}))),required:!0})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (TTD) *"}),(0,xt.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 55.00",value:f.price,onChange:e=>p((t=>(0,o.A)((0,o.A)({},t),{},{price:e.target.value}))),required:!0})]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),(0,xt.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:f.duration,onChange:e=>p((t=>(0,o.A)((0,o.A)({},t),{},{duration:e.target.value}))),children:[(0,xt.jsx)("option",{value:"monthly",children:"Monthly"}),(0,xt.jsx)("option",{value:"quarterly",children:"Quarterly (3 months)"}),(0,xt.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,xt.jsx)("textarea",{className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:"3",placeholder:"Describe what's included in this plan...",value:f.description,onChange:e=>p((t=>(0,o.A)((0,o.A)({},t),{},{description:e.target.value})))})]}),(0,xt.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,xt.jsx)("button",{type:"submit",className:"btn btn-primary",children:d?"Update Plan":"Create Plan"}),(0,xt.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:h,children:"Cancel"})]})]})})]}),0===v.length?(0,xt.jsxs)("div",{className:"text-center py-12",children:[(0,xt.jsx)("div",{className:"text-6xl mb-4",children:(0,xt.jsx)("div",{className:"flex justify-center",children:(0,xt.jsx)(pa,{name:"\ud83d\udccb",size:"2xl",className:"text-gray-400"})})}),(0,xt.jsx)("div",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Plans Yet"}),(0,xt.jsx)("div",{className:"text-gray-500 mb-6",children:"Create your first membership plan to get started"}),(0,xt.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>u(!0),children:"Create First Plan"})]}):(0,xt.jsx)("div",{className:"grid gap-4",children:v.map(((t,n)=>{var r;const o=(null===t||void 0===t?void 0:t.name)||"Plan",i=g.filter((e=>((null===e||void 0===e?void 0:e.membershipType)||(null===e||void 0===e?void 0:e.plan))===o)).length;return(0,xt.jsx)("div",{className:"card",children:(0,xt.jsx)("div",{className:"card-body",children:(0,xt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,xt.jsxs)("div",{className:"flex-1",children:[(0,xt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,xt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o}),(0,xt.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(i>0?"bg-success-100 text-success-700":"bg-gray-100 text-gray-600"),children:[i," member",1===i?"":"s"]})]}),(0,xt.jsxs)("div",{className:"text-2xl font-bold text-primary-600 mb-2",children:[Rt(null!==(r=null===t||void 0===t?void 0:t.price)&&void 0!==r?r:0),(0,xt.jsxs)("span",{className:"text-sm font-normal text-gray-500 ml-1",children:["/ ",(null===t||void 0===t?void 0:t.duration)||"month"]})]}),(null===t||void 0===t?void 0:t.description)&&(0,xt.jsx)("p",{className:"text-gray-600 text-sm",children:t.description})]}),(0,xt.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,xt.jsx)("button",{type:"button",className:"p-2 text-gray-400 hover:text-primary-600 transition-colors",onClick:()=>(e=>{p({name:e.name||"",price:e.price||"",description:e.description||"",duration:e.duration||"monthly",features:e.features||[]}),m(e),u(!0)})(t),title:"Edit plan",children:(0,xt.jsx)(va,{name:"\u270f\ufe0f",size:"sm"})}),(0,xt.jsx)("button",{type:"button",className:"p-2 text-gray-400 hover:text-danger-600 transition-colors",onClick:()=>(async t=>{const n=(Array.isArray(e)?e:[]).filter((e=>((null===e||void 0===e?void 0:e.membershipType)||(null===e||void 0===e?void 0:e.plan))===t.name)).length;if(n>0)alert('Cannot delete "'.concat(t.name,'" - it has ').concat(n," active member").concat(1===n?"":"s","."));else if(confirm('Are you sure you want to delete the plan "'.concat(t.name,'"?')))try{const e=a.filter((e=>e.id!==t.id));l(e)}catch(r){console.error("Error deleting plan:",r),alert("Error deleting plan. Please try again.")}})(t),title:"Delete plan",children:(0,xt.jsx)(va,{name:"\ud83d\uddd1\ufe0f",size:"sm"})})]})]})})},t.id||t._id||n)}))})]})},Reports:()=>{const{members:e,loading:t}=Nt(),[n,a]=(0,r.useState)([]);if((0,r.useEffect)((()=>{(async()=>{try{var e,t,n,r;const l=await(null!==(e=null!==(t=null===St.default||void 0===St.default||null===(n=St.default.getAllPayments)||void 0===n?void 0:n.call(St.default))&&void 0!==t?t:null===(r=St.getAllPayments)||void 0===r?void 0:r.call(St))&&void 0!==e?e:[]);a(l)}catch(Aa){console.error("[Reports] Failed to load payments:",Aa),a([])}})()}),[]),t)return(0,xt.jsx)("div",{className:"p-6",children:"Loading reports\u2026"});const l=Array.isArray(n)?n:[],o=Array.isArray(e)?e:[],i=l.reduce(((e,t)=>e+Number(t.amount||0)),0),s=o.filter((e=>"cancelled"!==e.payment_status)).length,c=o.length;return(0,xt.jsxs)("div",{className:"p-4",children:[(0,xt.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Reports"}),(0,xt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,xt.jsxs)("div",{className:"bg-white border rounded-2xl p-4",children:[(0,xt.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:c}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Total Members"})]}),(0,xt.jsxs)("div",{className:"bg-white border rounded-2xl p-4",children:[(0,xt.jsx)("div",{className:"text-2xl font-bold text-success",children:s}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Active Members"})]}),(0,xt.jsxs)("div",{className:"bg-white border rounded-2xl p-4",children:[(0,xt.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:Rt(i)}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})]}),(0,xt.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,xt.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcca"}),(0,xt.jsx)("div",{children:"Detailed Reports Coming Soon"}),(0,xt.jsx)("div",{className:"text-sm",children:"Advanced analytics and reporting features will be available here."})]})]})},Settings:()=>{var e;const[t,n]=(0,r.useState)({membershipFeeDefault:0,billingCycleDays:30,dueSoonDays:3,graceDays:0}),[a,l]=(0,r.useState)(!0),[i,s]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{var e,r,a,o;const l=await(null!==(e=null!==(r=null===St.default||void 0===St.default||null===(a=St.default.getSetting)||void 0===a?void 0:a.call(St.default,"gymSettings",t))&&void 0!==r?r:null===St.getSetting||void 0===St.getSetting?void 0:(0,St.getSetting)("gymSettings",t))&&void 0!==e?e:t);n(l);const i=await(null===St.default||void 0===St.default||null===(o=St.default.getStorageStats)||void 0===o?void 0:o.call(St.default));i&&s(i)}catch(Aa){console.error("Settings load error",Aa)}finally{l(!1)}})()}),[]),(0,xt.jsxs)("div",{className:"p-4 space-y-4",children:[(0,xt.jsx)("h1",{className:"text-2xl font-semibold",children:"Settings"}),(0,xt.jsxs)("div",{className:"space-y-4 bg-white border rounded-2xl p-4",children:[(0,xt.jsx)("div",{className:"font-medium",children:"Membership Settings"}),(0,xt.jsxs)("label",{className:"block",children:[(0,xt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Default Membership Fee ($)"}),(0,xt.jsx)("input",{className:"mt-1 border rounded px-3 py-2 w-full",type:"number",min:"0",step:"0.01",value:t.membershipFeeDefault,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{membershipFeeDefault:Number(e.target.value||0)})))}),(0,xt.jsx)("span",{className:"text-xs text-gray-500",children:"Default amount when recording payments"})]}),(0,xt.jsxs)("label",{className:"block",children:[(0,xt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Billing Cycle (days)"}),(0,xt.jsx)("input",{className:"mt-1 border rounded px-3 py-2 w-full",type:"number",min:"1",value:t.billingCycleDays,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{billingCycleDays:Number(e.target.value||30)})))}),(0,xt.jsx)("span",{className:"text-xs text-gray-500",children:"How often members are billed"})]}),(0,xt.jsxs)("label",{className:"block",children:[(0,xt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Due Soon Threshold (days)"}),(0,xt.jsx)("input",{className:"mt-1 border rounded px-3 py-2 w-full",type:"number",min:"0",value:t.dueSoonDays,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{dueSoonDays:Number(e.target.value||3)})))}),(0,xt.jsx)("span",{className:"text-xs text-gray-500",children:'Show "due soon" when payment is due within this many days'})]}),(0,xt.jsxs)("label",{className:"block",children:[(0,xt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Grace Period (days)"}),(0,xt.jsx)("input",{className:"mt-1 border rounded px-3 py-2 w-full",type:"number",min:"0",value:t.graceDays,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{graceDays:Number(e.target.value||0)})))}),(0,xt.jsx)("span",{className:"text-xs text-gray-500",children:"Additional days before marking as overdue"})]}),(0,xt.jsx)("div",{className:"pt-2",children:(0,xt.jsx)("button",{type:"button",className:"border rounded px-4 py-2 bg-blue-500 text-white hover:bg-blue-600",onClick:async function(){var e,n;await(null!==(e=null===(n=St.default.saveSetting)||void 0===n?void 0:n.call(St.default,"gymSettings",t))&&void 0!==e?e:(0,St.saveSetting)("gymSettings",t)),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t,n;null===(t=(n=window).dispatchEvent)||void 0===t||t.call(n,new CustomEvent("DATA_CHANGED",{detail:e}))}catch(r){}}("settings"),alert("Settings saved successfully!")},children:"Save Settings"})})]}),(0,xt.jsx)("div",{className:"card",children:(0,xt.jsxs)("div",{className:"card-body",children:[(0,xt.jsx)("div",{className:"font-medium mb-2",children:"Current Configuration"}),(0,xt.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,xt.jsxs)("div",{children:["Default Fee: $",(null===(e=t.membershipFeeDefault)||void 0===e?void 0:e.toFixed(2))||"0.00"]}),(0,xt.jsxs)("div",{children:["Billing Cycle: ",t.billingCycleDays||30," days"]}),(0,xt.jsxs)("div",{children:["Due Soon Warning: ",t.dueSoonDays||3," days"]}),(0,xt.jsxs)("div",{children:["Grace Period: ",t.graceDays||0," days"]})]})]})})]})},Sidebar:()=>{const[e,t]=(0,r.useState)(!1);return(0,xt.jsxs)("nav",{className:"hidden md:block fixed left-0 top-0 h-full bg-white shadow-lg z-40 transition-all duration-300 group ".concat(e?"w-56":"w-16 hover:w-56"),children:[(0,xt.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,xt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,xt.jsxs)("div",{className:"transition-opacity duration-300 ".concat(e?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[(0,xt.jsx)("h1",{className:"text-lg font-bold text-indigo-600 whitespace-nowrap",children:"GoGym4U"}),(0,xt.jsx)("p",{className:"text-xs text-gray-500 whitespace-nowrap",children:"Gym Management"})]}),(0,xt.jsx)("button",{type:"button",onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-slate-50 transition-colors","aria-label":"Toggle sidebar",children:(0,xt.jsx)("span",{className:"text-lg",children:"\u2630"})})]})}),(0,xt.jsx)("div",{className:"flex-1 py-6 overflow-hidden",children:(0,xt.jsx)("ul",{className:"space-y-2 px-3",children:[{path:"/dashboard",icon:"\ud83d\udcca",label:"Dashboard"},{path:"/members",icon:"\ud83d\udc65",label:"Members"},{path:"/plans",icon:"\ud83d\udccb",label:"Plans"},{path:"/payments",icon:"\ud83d\udcb3",label:"Payments"},{path:"/reports",icon:"\ud83d\udcc8",label:"Reports"},{path:"/settings",icon:"\u2699\ufe0f",label:"Settings"}].map((t=>{return(0,xt.jsx)("li",{children:(0,xt.jsxs)("a",{href:"#".concat(t.path),className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 cursor-pointer ".concat((n=t.path,window.location.hash==="#".concat(n)?"text-indigo-600 font-semibold border-r-2 border-indigo-600":"text-slate-500 hover:text-slate-700")),children:[(0,xt.jsx)("span",{className:"w-5 h-5 shrink-0 text-xl flex items-center justify-center",children:t.icon}),(0,xt.jsx)("span",{className:"whitespace-nowrap transition-opacity duration-300 ".concat(e?"opacity-100":"opacity-0 group-hover:opacity-100"),children:t.label})]})},t.path);var n}))})}),(0,xt.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,xt.jsx)("div",{className:"text-xs text-gray-500 text-center transition-opacity duration-300 ".concat(e?"opacity-100":"opacity-0 group-hover:opacity-100"),children:(0,xt.jsx)("div",{className:"whitespace-nowrap",children:"GoGym4U v2.0"})})})]})},LoginForm:e=>{let{onLogin:t}=e;const[n,a]=(0,r.useState)({username:"",password:""});return(0,xt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,xt.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,xt.jsx)("div",{children:(0,xt.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"GoGym4U Login"})}),(0,xt.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:e=>{e.preventDefault(),n.username&&n.password?t():alert("Please enter username and password")},children:[(0,xt.jsx)("div",{children:(0,xt.jsx)("input",{type:"text",required:!0,className:"input",placeholder:"Username",value:n.username,onChange:e=>a((0,o.A)((0,o.A)({},n),{},{username:e.target.value}))})}),(0,xt.jsx)("div",{children:(0,xt.jsx)("input",{type:"password",required:!0,className:"input",placeholder:"Password",value:n.password,onChange:e=>a((0,o.A)((0,o.A)({},n),{},{password:e.target.value}))})}),(0,xt.jsx)("div",{children:(0,xt.jsx)("button",{type:"submit",className:"btn btn-primary w-full",children:"Sign In"})})]})]})})},InstallPrompt:()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=e=>{e.preventDefault(),t(!0)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("beforeinstallprompt",e)}),[]),e?(0,xt.jsx)("div",{className:"fixed bottom-4 left-4 right-4 bg-indigo-600 text-white p-4 rounded-lg shadow-lg z-50",children:(0,xt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("p",{className:"font-medium",children:"Install GoGym4U"}),(0,xt.jsx)("p",{className:"text-sm text-indigo-100",children:"Add to home screen for quick access"})]}),(0,xt.jsx)("button",{onClick:()=>t(!1),className:"btn btn-outline text-white border-white ml-4",children:"Install"})]})}):null},AddMember:function(){de();const[e,t]=r.useState({firstName:"",lastName:"",email:"",phone:"",membershipType:""});return(0,xt.jsxs)("div",{className:"p-4",children:[(0,xt.jsx)("h1",{className:"text-xl font-semibold mb-3",children:"Add Member"}),(0,xt.jsxs)("form",{onSubmit:async t=>{var n,r,a,l;t.preventDefault();const i=(null===(n=crypto)||void 0===n||null===(r=n.randomUUID)||void 0===r?void 0:r.call(n))||String(Date.now()),s=(0,o.A)((0,o.A)({id:i},e),{},{name:"".concat(e.firstName," ").concat(e.lastName).trim()||e.firstName||e.lastName,status:"Active",active:!0,joinedOn:(new Date).toISOString()});await Lt.saveMember(s),null===(a=(l=window).navigateToTab)||void 0===a||a.call(l,"members")},className:"card",children:[(0,xt.jsxs)("div",{className:"card-body grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",placeholder:"First name",value:e.firstName,onChange:e=>t((t=>(0,o.A)((0,o.A)({},t),{},{firstName:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",placeholder:"Last name",value:e.lastName,onChange:e=>t((t=>(0,o.A)((0,o.A)({},t),{},{lastName:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",placeholder:"Email",value:e.email,onChange:e=>t((t=>(0,o.A)((0,o.A)({},t),{},{email:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",placeholder:"Phone",value:e.phone,onChange:e=>t((t=>(0,o.A)((0,o.A)({},t),{},{phone:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded sm:col-span-2",placeholder:"Plan (e.g., Standard)",value:e.membershipType,onChange:e=>t((t=>(0,o.A)((0,o.A)({},t),{},{membershipType:e.target.value})))})]}),(0,xt.jsxs)("div",{className:"p-4 flex gap-3",children:[(0,xt.jsx)("button",{type:"submit",className:"btn-primary",children:"Save Member"}),(0,xt.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{var e,t;return null===(e=(t=window).navigateToTab)||void 0===e?void 0:e.call(t,"members")},children:"Cancel"})]})]})]})},RecordPayment:function(){de();const{members:e}=Nt(),[t,n]=r.useState({memberId:"",amount:"",paidOn:(new Date).toISOString().slice(0,10),method:"Cash",note:""});return(0,xt.jsxs)("div",{className:"p-4",children:[(0,xt.jsx)("h1",{className:"text-xl font-semibold mb-3",children:"Record Payment"}),(0,xt.jsxs)("form",{onSubmit:async n=>{var r,a,l,i;n.preventDefault();if(!(Array.isArray(e)?e:[]).find((e=>(e.id||e._id||e.uuid)===t.memberId)))return alert("Select a member");const s=(0,o.A)((0,o.A)({id:(null===(r=crypto)||void 0===r||null===(a=r.randomUUID)||void 0===a?void 0:a.call(r))||String(Date.now())},t),{},{amount:Number(t.amount||0)});await Lt.savePayment(s),null===(l=(i=window).navigateToTab)||void 0===l||l.call(i,"payments")},className:"card",children:[(0,xt.jsxs)("div",{className:"card-body grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,xt.jsxs)("select",{className:"btn-ghost border p-2 rounded",value:t.memberId,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{memberId:e.target.value}))),children:[(0,xt.jsx)("option",{value:"",children:"Select member\u2026"}),(Array.isArray(e)?e:[]).map((e=>{var t,n;const r=e.id||e._id||e.uuid,a=e.name||"".concat(null!==(t=e.firstName)&&void 0!==t?t:""," ").concat(null!==(n=e.lastName)&&void 0!==n?n:"").trim()||"Member";return(0,xt.jsx)("option",{value:r,children:a},r)}))]}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",type:"number",min:"0",step:"0.01",placeholder:"Amount",value:t.amount,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{amount:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",type:"date",value:t.paidOn,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{paidOn:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded",placeholder:"Method",value:t.method,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{method:e.target.value})))}),(0,xt.jsx)("input",{className:"btn-ghost border p-2 rounded sm:col-span-2",placeholder:"Note (optional)",value:t.note,onChange:e=>n((t=>(0,o.A)((0,o.A)({},t),{},{note:e.target.value})))})]}),(0,xt.jsxs)("div",{className:"p-4 flex gap-3",children:[(0,xt.jsx)("button",{type:"submit",className:"btn-primary",children:"Save Payment"}),(0,xt.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{var e,t;const n=localStorage.getItem("pendingPaymentOrigin")||"payments";localStorage.removeItem("pendingPaymentOrigin"),null===(e=(t=window).navigateToTab)||void 0===e||e.call(t,n)},children:"Cancel"})]})]})]})}},ka=wa,Sa=e=>{let{k:t,v:n}=e;return(0,xt.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid #eee"},children:[(0,xt.jsx)("strong",{children:t}),(0,xt.jsx)("span",{style:{color:!0===n?"#16a34a":n instanceof Error?"#dc2626":"#6b7280"},children:n instanceof Error?n.message:String(n)})]})};function Na(){const[e,t]=r.useState({});return r.useEffect((()=>{(async()=>{const e={};try{e.ComponentsObject=!!ka}catch(Aa){e.ComponentsObject=Aa}e.ComponentKeys=ka?Object.keys(ka).join(", "):"none";e.Missing=["Sidebar","Dashboard","ClientManagement","PaymentTracking","MembershipManagement","Reports","Settings","LoginForm","InstallPrompt"].filter((e=>!ka||!ka[e])).join(", ")||!0,e.storageDefault=!!St.default;try{const t=await Lt.getAllMembers();e.getAllMembersOK=Array.isArray(t)}catch(Aa){e.getAllMembersOK=Aa}try{var n,r,a;const t=await jt.Ay.listMembers();e.MembersRepoListOK=Array.isArray(t);const l={name:"_diag_",email:"_",phone:"_"},o=await jt.Ay.upsertMember(l);e.MembersRepoUpsertOK=Array.isArray(o)&&o.some((e=>"_diag_"===e.name));const i=null!==(n=null===(r=o.find((e=>"_diag_"===e.name)))||void 0===r?void 0:r.id)&&void 0!==n?n:null===(a=o.find((e=>"_diag_"===e.name)))||void 0===a?void 0:a._id,s=await jt.Ay.removeMember(i);e.MembersRepoDeleteOK=Array.isArray(s)&&!s.some((e=>"_diag_"===e.name))}catch(Aa){e.MembersRepoError=(null===Aa||void 0===Aa?void 0:Aa.message)||String(Aa)}t(e)})()}),[]),(0,xt.jsxs)("div",{style:{padding:16,fontFamily:"system-ui, -apple-system, Segoe UI, Roboto"},children:[(0,xt.jsx)("h1",{style:{margin:"0 0 12px"},children:"Diagnostics"}),Object.entries(e).map((e=>{let[t,n]=e;return(0,xt.jsx)(Sa,{k:t,v:n},t)})),(0,xt.jsxs)("div",{style:{marginTop:12},children:[(0,xt.jsx)("a",{href:"#/dashboard",style:{marginRight:12},children:"Go to dashboard"}),(0,xt.jsx)("button",{onClick:()=>location.reload(),style:{padding:"6px 10px"},children:"Reload"})]})]})}const ja=()=>{const e=se(),t=de(),n=t=>e.pathname===t;return(0,xt.jsx)("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 h-16 bg-white/95 backdrop-blur border-t border-gray-200",children:(0,xt.jsx)("div",{className:"flex",children:[{path:"/dashboard",icon:"\ud83d\udcca",label:"Dashboard"},{path:"/members",icon:"\ud83d\udc65",label:"Members"},{path:"/plans",icon:"\ud83d\udccb",label:"Plans"},{path:"/payments",icon:"\ud83d\udcb3",label:"Payments"},{path:"/settings",icon:"\u2699\ufe0f",label:"Settings"}].map((e=>(0,xt.jsxs)("button",{type:"button",onClick:()=>t(e.path),className:"flex flex-col items-center justify-center text-xs flex-1 h-16 transition-colors duration-200 ".concat(n(e.path)?"text-indigo-600 font-semibold":"text-slate-500 hover:text-slate-700"),children:[(0,xt.jsx)("div",{className:"mb-1",children:(0,xt.jsx)(ha,{name:e.icon,isActive:n(e.path),size:"lg"})}),(0,xt.jsx)("span",{className:"font-medium text-xs leading-tight",children:e.label})]},e.path)))})})},Ea=()=>{const e=de(),t=ka||{},n=t.AddMember||(()=>(0,xt.jsx)("div",{className:"p-4",children:"Add member form missing"})),a=t.RecordPayment||(()=>(0,xt.jsx)("div",{className:"p-4",children:"Record payment form missing"}));return(0,r.useEffect)((()=>{window.navigateToTab=t=>{const n={dashboard:"/dashboard",members:"/members",plans:"/plans",payments:"/payments",reports:"/reports",settings:"/settings"};n[t]&&e(n[t])},window.setActiveTab=window.navigateToTab,window.navigateTo=e}),[e]),(0,xt.jsxs)("div",{className:"min-h-screen bg-slate-50 flex",children:[t.Sidebar?(0,xt.jsx)(t.Sidebar,{}):null,(0,xt.jsx)("main",{className:"flex-1 min-w-0 pb-20 md:pb-4 md:ml-16",children:(0,xt.jsxs)(Le,{children:[(0,xt.jsx)(Me,{path:"/",element:(0,xt.jsx)(Ae,{to:"/dashboard",replace:!0})}),(0,xt.jsx)(Me,{path:"/dashboard",element:t.Dashboard?(0,xt.jsx)(t.Dashboard,{}):(0,xt.jsx)("div",{className:"p-4",children:"No Dashboard"})}),(0,xt.jsx)(Me,{path:"/members",element:t.ClientManagement?(0,xt.jsx)(t.ClientManagement,{}):(0,xt.jsx)("div",{className:"p-4",children:"No Members"})}),(0,xt.jsx)(Me,{path:"/add-member",element:(0,xt.jsx)(n,{})}),(0,xt.jsx)(Me,{path:"/plans",element:t.MembershipManagement?(0,xt.jsx)(t.MembershipManagement,{}):(0,xt.jsx)("div",{className:"p-4",children:"No Plans"})}),(0,xt.jsx)(Me,{path:"/payments",element:t.PaymentTracking?(0,xt.jsx)(t.PaymentTracking,{}):(0,xt.jsx)("div",{className:"p-4",children:"No Payments"})}),(0,xt.jsx)(Me,{path:"/payments/new",element:(0,xt.jsx)(a,{})}),(0,xt.jsx)(Me,{path:"/reports",element:t.Reports?(0,xt.jsx)(t.Reports,{}):(0,xt.jsx)("div",{className:"p-4",children:"No Reports"})}),(0,xt.jsx)(Me,{path:"/settings",element:t.Settings?(0,xt.jsx)(t.Settings,{}):(0,xt.jsx)("div",{className:"p-4",children:"No Settings"})}),(0,xt.jsx)(Me,{path:"/__diag",element:(0,xt.jsx)(Na,{})}),(0,xt.jsx)(Me,{path:"*",element:(0,xt.jsx)("div",{className:"p-4",children:"Not found"})})]})}),(0,xt.jsx)(ja,{})]})};function Ca(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{var e,n,r,a;"serviceWorker"in navigator&&(null===(e=(n=navigator.serviceWorker).getRegistrations)||void 0===e||e.call(n).then((e=>e.forEach((e=>e.unregister())))).catch((()=>{})),null===(r=caches)||void 0===r||null===(a=r.keys)||void 0===a||a.call(r).then((e=>e.forEach((e=>caches.delete(e))))).catch((()=>{})));(()=>{try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.includes("member")||n.includes("client")||n.includes("gym"))&&e.push(n)}e.forEach((e=>localStorage.removeItem(e))),console.log("\ud83e\uddf9 Cleared ".concat(e.length," member-related localStorage items")),sessionStorage.clear(),console.log("\ud83e\uddf9 Cleared sessionStorage")}catch(Aa){console.warn("Warning: Could not clear member cache:",Aa)}})();(()=>{const e=document.getElementById("loading-screen");e&&(e.style.display="none",console.log("\ud83d\ude80 Loading screen dismissed by React App mount"))})(),window.dismissLoadingScreen&&window.dismissLoadingScreen(),t(!0)}),[]),(0,xt.jsx)(kt,{children:(0,xt.jsx)(dt,{children:(0,xt.jsx)(Ea,{})})})}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((e=>e.forEach((e=>e.unregister()))));a.createRoot(document.getElementById("root")).render((0,xt.jsx)(r.StrictMode,{children:(0,xt.jsx)(Ca,{})}))})();
//# sourceMappingURL=main.1b613f19.js.map